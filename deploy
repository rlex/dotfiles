#!/bin/bash
### Simple shell script for symlinking all files from .rc dir to home directory (c) Lex Rivera

### Array of all config files and directories
# dotfiles, for example .bashrc. Put it in array without leading dot. Also dirs.
dotfiles=( screenrc vimrc zshrc bashrc bash_profile gemrc htoprc gitconfig biewrc dircolors ackrc muttrc my.cnf toprc Xdefaults gvimrc nanorc mc vim mutt config/awesome config/mc config/htop tmux.conf tmux mailcap gitignore_global )

# Function to symlink dotfiles
# We checking if OS is Linux (GNU coreutils), if no, we assume OS use BSD utils
# Yeah this is fuckin' dirty, but works in most of cases
symlink() {
  if [[ `uname` == "Linux" ]];
    then
      ln -sfvn $1 $2
    else
      ln -svfh $1 $2
  fi
}

case "$1" in

  env) echo "Deploying environment"
       cd ~/.rc
       echo "Deploying dotfiles from `pwd` to ${HOME}"
       if [ -d ~/.config ];
        then
           echo "skipping config folder creation"
        else
          mkdir ~/.config
       fi

       for file in ${dotfiles[@]}
         do
           symlink ~/.rc/.${file} ~/.${file}
         done
       echo "Finished!"

       cd - >&/dev/null
  ;;

  devenv) echo "Deploying pyenv+rbenv"
          git clone https://github.com/sstephenson/rbenv.git ~/.rbenv
          git clone https://github.com/yyuu/pyenv.git ~/.pyenv
  ;;


  *) echo "Possible args: env, devenv"
esac
